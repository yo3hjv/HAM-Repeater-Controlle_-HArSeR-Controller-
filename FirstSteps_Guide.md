# ESP32 Repeater Controller - First Steps Guide

This guide will help you get started with your ESP32 Repeater Controller after flashing the firmware.

## Initial Boot Process

1. **Power On**: After flashing the firmware and powering on the ESP32, it will:
   - Initialize the I2C interface and scan for connected devices
   - Check for an LCD display at the configured I2C address
   - Initialize SPIFFS file system
   - Start in Access Point (AP) mode with the default SSID "ESP32_Repeater"

2. **LCD Display** (if connected):
   - Shows boot screen with "ESP32 Repeater" and firmware version
   - Displays "POST PASSED" message
   - Shows "by YO3HJV" on the second line

## Connecting to the ESP32

### Initial Connection (AP Mode)

1. **Connect to the ESP32's WiFi**:
   - On your phone/computer, scan for WiFi networks
   - Connect to the "ESP32_Repeater" network
   - No password is required by default

2. **Access the Web Interface**:
   - Open a web browser
   - Navigate to http://192.168.4.1/
   - You should see the repeater controller's homepage

## Setting Up WiFi Client Mode (Optional)

To connect your ESP32 to your home/office WiFi network:

1. **Navigate to WiFi Setup**:
   - In the web interface, go to http://192.168.4.1/wifi
   - This opens the WiFi setup page (core page, not from SPIFFS)

2. **Enter WiFi Credentials**:
   - Enter your WiFi network SSID
   - Enter your WiFi password
   - Click "Save"

3. **Reconnect to ESP32**:
   - The ESP32 will attempt to connect to your WiFi network
   - If successful, it will be available at the IP address assigned by your router
   - You can find this IP address in your router's DHCP client list
   - If connection fails, the ESP32 will revert to AP mode

## Uploading Web Files to SPIFFS

For full functionality, you need to upload the web interface files to the ESP32's SPIFFS storage:

1. **Access the Upload Page**:
   - Navigate to http://192.168.4.1/upload (or the new IP if in client mode)
   - This is a core page generated by the firmware, not from SPIFFS

2. **Upload Web Files**:
   - Use the "Upload Web Files" section
   - Select the ZIP file containing all web files from the WEBdata directory
   - Click "Upload"
   - Wait for the upload to complete

3. **Upload Settings Files** (Optional):
   - Use the "Upload Settings File" section
   - Select your settings.ini file if you have one
   - Click "Upload"

## Accessing the Full Web Interface

After uploading the web files:

1. **Navigate to the Homepage**:
   - Go to http://192.168.4.1/ (or the new IP if in client mode)
   - You should now see the complete web interface with header and footer

2. **Available Pages**:
   - **Homepage** (/): Status and information
   - **Settings** (/settings): Configure all repeater parameters
   - **About** (/about): Information about the repeater

## Configuring the Repeater

1. **Basic Settings**:
   - Go to the Settings page
   - Configure your callsign and other basic parameters
   - All changes are applied immediately via AJAX

2. **WiFi Settings**:
   - The WiFi Settings section in the settings.html page shows current AP configuration
   - To change WiFi client connection, use the dedicated /wifi page (core page)
   - The WiFi section in settings.html currently lacks JavaScript handlers to update settings via AJAX

## Core Pages vs SPIFFS Pages

The ESP32 Repeater Controller uses two types of web pages:

1. **Core Pages** (generated by firmware):
   - /upload - File upload interface
   - /debug - Debug settings page
   - /switchtoap - AP mode switch handler
   - /wifi - WiFi setup page for client credentials
   - /wifisave - Handler for saving WiFi credentials
   - These pages do not have the header/footer frame

2. **SPIFFS Pages** (loaded from storage):
   - / (index) - Homepage with status information
   - /settings - Main settings configuration page
   - /about - Information about the repeater
   - These pages include the header/footer frame

## Troubleshooting

- If you can't connect to the ESP32 after flashing, try resetting it
- If web pages don't load properly, ensure all files were uploaded to SPIFFS
- Check the serial monitor (115200 baud) for debugging information

## Next Steps

- Configure your repeater settings according to your requirements
- Test the repeater functionality with your radio equipment
- Consider setting up port forwarding on your router if you want to access the repeater controller from the internet
